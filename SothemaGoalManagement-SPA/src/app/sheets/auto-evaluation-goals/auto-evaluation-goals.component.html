<div class="card mt-1" style="cursor: pointer" (click)="toggleGoal()">
  <div class=" card-header ">
    <div class="row">
      <div class="col-md-11">
        {{ goal.description }}
      </div>

      <div class="col-md-1 float-right">
        <fa-icon [icon]="faCaretDown" *ngIf="isCollapsed"></fa-icon>
        <fa-icon [icon]="faCaretUp" *ngIf="!isCollapsed"></fa-icon>
      </div>
    </div>

    <div class="row mt-3">
      <div class="col-sm-3">
        <label>Type d'objectif:</label>
        {{ goal.goalType.name }}
      </div>

      <div class="col-sm-3">
        {{ goal.projectName }}
      </div>

      <div class="col-sm-3">
        <label>Poids d'Objectif:</label>
        <span class="badge badge-pill badge-info" title="Poids d'objectif">
          {{ goal.weight }} %
        </span>
      </div>
    </div>

  </div>
  <div class="card-body" *ngIf="!isCollapsed" (click)="$event.stopPropagation()">
    <div class="float-right mb-1">
      <button class="btn btn-primary" (click)="addEvaluation()">
        Ajouter une évaluation
      </button>
    </div>
    <table class="table table-hover">
      <tr>
        <th style="width: 20%">Date heure</th>
        <th style="width: 15%">Évaluateur</th>
        <th style="width: 18%">Taux de réalisation</th>
        <th style="width: 42%">Commentaire</th>
        <th style="width: 5%"></th>
      </tr>
      <tr *ngFor="let evaluation of goal.goalEvaluations">
        <td>{{ evaluation.created | date :'short' }}</td>
        <td>{{ evaluation.evaluatorName }}</td>
        <td>
          <span class="badge badge-pill badge-success">{{ evaluation.completionRate }}%</span>
        </td>
        <td>{{ evaluation.comment }}</td>
        <td>

        </td>
      </tr>
    </table>
  </div>
</div>
