<ngx-loading [show]="loading"></ngx-loading>
<div class="modal-header">
  <h4 class="modal-title pull-left">Cascader Objectif</h4>
  <button type="button" class="close pull-right" aria-label="Close" (click)="bsModalRef.hide()">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<div class="modal-body">
  <div class="alert alert-info mt-3" role="alert" *ngIf="usersGoalWeights.length === 0">
    Aucun évalué n'a été encore affecté à vous!
  </div>

  <div *ngIf="usersGoalWeights.length > 0">
    <p>
      {{cascadededGoal.description}}
    </p>

    <table class="table table-hover" style="cursor: pointer">
      <tr>
        <th style="width: 5%">
          <input class="form-check-input" type="checkbox" (change)="selectAll()" [checked]="selectedAll" data-toggle="tooltip" data-placement="top"
            title="Tout sélectionner/désélectionner">
        </th>
        <th style="width: 35%">Nom</th>
        <th style="width: 35%">Statut</th>
        <th style="width: 30%">Poids d'Objectif %</th>
      </tr>
      <tr *ngFor="let ugw of usersGoalWeights">
        <td>
          <input class="form-check-input" type="checkbox" value="{{ugw.evaluatee.id}}" [(ngModel)]="ugw.selected" (change)="checkIfAllSelected()">
        </td>
        <td>{{ ugw.evaluatee.fullName }}</td>
        <td>{{ ugw.evaluatee.title}}</td>
        <td>
          <span *ngIf="!ugw.selected">
            0
          </span>
          <span *ngIf="ugw.selected">
            <input type="number" (input)="setWeight($event.target.value, ugw.evaluatee.id)" value="0" maxlength="3" size="4">
          </span>
        </td>
      </tr>
    </table>
  </div>
</div>
<div class="modal-footer">
  <button type="button" class="btn btn-primary" (click)="bsModalRef.hide()">Annuler</button>
  <button type="button" class="btn btn-success" (click)="cascadeGoal()" [disabled]="disableAction()">Cascader Objectif</button>
</div>
