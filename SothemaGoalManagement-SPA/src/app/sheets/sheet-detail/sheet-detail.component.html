<div class="container mt-4">
  <div class="card">
    <div class="card-header">
      <h1>Fiche d'évaluation</h1>
    </div>
    <div class="card-body">
      <tabset class="strategy-tabset">
        <tab heading="Détail">
          <div class="container mt-2">
            <div class="row">
              <div class="col-md-4">
                <strong>Titre:</strong>
                <p>{{ sheetDetail.title }}</p>
              </div>
              <div class="col-md-4">
                <strong>Année:</strong>
                <p>{{ sheetDetail.year }}</p>
              </div>
              <div class="col-md-4">
                <strong>Statut:</strong>
                <p>{{ sheetDetail.status }}</p>
              </div>
            </div>

            <div class="row">
              <div class="col-md-4">
                <strong>Matricule:</strong>
                <p>{{ sheetDetail.employeeNumber }}</p>
              </div>
              <div class="col-md-4">
                <strong>Nom de l'employé:</strong>
                <p>{{ sheetDetail.ownerName }}</p>
              </div>
              <div class="col-md-4">
                <strong>Fonction:</strong>
                <p>{{ sheetDetail.ownerTitle }}</p>
              </div>
            </div>

            <div class="row">
              <div class="col-md-4">
                <strong>Pôle/entité:</strong>
                <p>{{ sheetDetail.axisInstances[0].poleName }}</p>
              </div>
              <div class="col-md-4">
                <strong>Créé:</strong>
                <p>{{ sheetDetail.created | date: 'mediumDate' }}</p>
              </div>
            </div>
          </div>
        </tab>
        <tab heading="Stratégie">
          <app-axis-user [strategyTitle]="sheetDetail.strategyTitle" [strategyDescription]="sheetDetail.strategyDescription" [axisInstances]="sheetDetail.axisInstances"></app-axis-user>
        </tab>
        <tab heading="Définition des objectifs">
          <div *ngIf="goalsByAxisInstanceList">
            <app-goals [areGoalsCompleted]="areGoalsCompleted" [areGoalsReadOnly]="areGoalsReadOnly" [goalsByAxisInstanceList]="goalsByAxisInstanceList"
              [axisInstances]="sheetDetail.axisInstances" [goalTypeList]="goalTypeList" (createGoalEvent)="handleCreateGoal($event)"
              (editGoalEvent)="handleEditGoal($event)" (deleteGoalEvent)="handleDeleteGoal($event)" (validateGoalsEvent)="handleValidateGoals($event)"></app-goals>
          </div>
        </tab>
        <tab heading="Auto-Évaluation">
          <div *ngIf="goalsByAxisInstanceList">
            <app-auto-evaluation [goalsByAxisInstanceList]="goalsByAxisInstanceList" [areGoalsEvaluable]="areGoalsEvaluable"></app-auto-evaluation>

            <div class="float-right">
              <button class="btn btn-primary w-70 mr-1" (click)="saveAutoEvaluation()" *ngIf="areGoalsEvaluable">
                Sauvegarder Auto-Évaluation
              </button>
            </div>
          </div>
        </tab>
      </tabset>
    </div>

    <div class="card-footer">
      <div class="btn-group d-flex">
        <button class="btn btn-success w-70 mr-1" [routerLink]="['/sheets']">
          Retour au List
        </button>
      </div>
    </div>
  </div>
</div>
